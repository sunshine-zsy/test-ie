"use strict";(self["webpackChunkpc_exam_student"]=self["webpackChunkpc_exam_student"]||[]).push([[717],{8519:function(t,e,s){s.d(e,{Dv:function(){return n},Gr:function(){return d},N5:function(){return o},Wv:function(){return p},dd:function(){return c},pt:function(){return a},ro:function(){return l},sI:function(){return r},tj:function(){return u},zq:function(){return f}});var i=s(47120);function c(t){return(0,i.A)({url:"/system/repos/list",method:"get",params:t})}function r(t){return(0,i.A)({url:"/reposCollections/reposCollections/myRepos",method:"get",params:t})}function n(t){return(0,i.A)({url:"/reposCollections/reposCollections/collect/".concat(t),method:"get"})}function o(t){return(0,i.A)({url:"/reposCollections/reposCollections/cancelCollect/".concat(t),method:"get"})}function a(t){return(0,i.A)({url:"/practice/repo/info/".concat(t),method:"get"})}function u(t){return(0,i.A)({url:"/practice/practiceRecords/start",method:"post",data:t})}function l(t){return(0,i.A)({url:"/practice/practiceRecords/".concat(t),method:"get"})}function p(t){return(0,i.A)({url:"/practice/recordsTopic/puOption",method:"post",data:t})}function d(t){return(0,i.A)({url:"/system/repos/getTopicType/".concat(t),method:"get"})}function f(t){return(0,i.A)({url:"/practice/practiceRecords/list",method:"get",params:t})}},29717:function(t,e,s){s.r(e),s.d(e,{default:function(){return C}});var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"practice-detail"},[e("div",{staticClass:"header"},[e("div",{staticClass:"back",on:{click:function(e){return t.$router.back()}}},[e("i",{staticClass:"el-icon-arrow-left"}),t._v(" 返回 ")]),e("div",{staticClass:"title"},[t._v(t._s(t.repoInfo.title||"题库详情"))])]),e("div",{staticClass:"intro-section"},[e("div",{staticClass:"title"},[t._v("题库简介")]),e("div",{staticClass:"content"},[t._v(t._s(t.repoInfo.description||"暂无简介"))])]),e("div",{staticClass:"practice-section"},[e("div",{staticClass:"title"},[t._v("自由练习")]),e("div",{staticClass:"practice-list"},[e("div",{staticClass:"practice-item",on:{click:function(e){return t.startPractice("sequence")}}},[t._m(0)]),e("div",{staticClass:"practice-item",on:{click:function(e){return t.startPractice("random")}}},[t._m(1)]),e("div",{staticClass:"practice-item",on:{click:function(e){return t.startPractice("wrong")}}},[t._m(2)])])]),e("div",{staticClass:"practice-section"},[e("div",{staticClass:"title"},[t._v("题型练习")]),e("div",{staticClass:"practice-list"},[t.topicStats.singleCount>0?e("div",{staticClass:"practice-item",on:{click:function(e){return t.startPractice("single")}}},[e("div",{staticClass:"item-content"},[e("i",{staticClass:"el-icon-circle-check"}),e("span",[t._v("单选题")]),e("div",{staticClass:"count"},[t._v(t._s(t.topicStats.singleCount)+"题")]),e("div",{staticClass:"progress-info"},[t.topicStats.singleProgress?e("span",[t._v("进度："+t._s(t.topicStats.singleProgress))]):t._e(),t.topicStats.singleCorrectRate?e("span",[t._v("正确率："+t._s(t.topicStats.singleCorrectRate)+"%")]):t._e()])])]):t._e(),t.topicStats.multipleCount>0?e("div",{staticClass:"practice-item",on:{click:function(e){return t.startPractice("multiple")}}},[e("div",{staticClass:"item-content"},[e("i",{staticClass:"el-icon-document-checked"}),e("span",[t._v("多选题")]),e("div",{staticClass:"count"},[t._v(t._s(t.topicStats.multipleCount)+"题")]),e("div",{staticClass:"progress-info"},[t.topicStats.multipleProgress?e("span",[t._v("进度："+t._s(t.topicStats.multipleProgress))]):t._e(),t.topicStats.multipleCorrectRate?e("span",[t._v("正确率："+t._s(t.topicStats.multipleCorrectRate)+"%")]):t._e()])])]):t._e(),t.topicStats.judgeCount>0?e("div",{staticClass:"practice-item",on:{click:function(e){return t.startPractice("judge")}}},[e("div",{staticClass:"item-content"},[e("i",{staticClass:"el-icon-finished"}),e("span",[t._v("判断题")]),e("div",{staticClass:"count"},[t._v(t._s(t.topicStats.judgeCount)+"题")]),e("div",{staticClass:"progress-info"},[t.topicStats.judgeProgress?e("span",[t._v("进度："+t._s(t.topicStats.judgeProgress))]):t._e(),t.topicStats.judgeCorrectRate?e("span",[t._v("正确率："+t._s(t.topicStats.judgeCorrectRate)+"%")]):t._e()])])]):t._e()])])])},c=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"item-content"},[e("i",{staticClass:"el-icon-sort"}),e("span",[t._v("顺序练习")]),e("div",{staticClass:"progress-info"})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"item-content"},[e("i",{staticClass:"el-icon-refresh"}),e("span",[t._v("随机练习")]),e("div",{staticClass:"progress-info"})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"item-content"},[e("i",{staticClass:"el-icon-warning-outline"}),e("span",[t._v("背题模式")])])}],r=s(9217),n=s(7180),o=s(24634),a=(s(44114),s(18111),s(7588),s(8519)),u=s(44973),l={name:"PracticeDetail",data:function(){return{repoInfo:this.$route.query.repoInfo?JSON.parse(this.$route.query.repoInfo):{title:"",description:"",totalCount:0},topicStats:{singleCount:0,multipleCount:0,judgeCount:0,singleProgress:"",multipleProgress:"",judgeProgress:"",singleCorrectRate:0,multipleCorrectRate:0,judgeCorrectRate:0}}},methods:{fetchRepoInfo:function(){var t=this;return(0,o.A)((0,r.A)().m(function e(){var s,i;return(0,r.A)().w(function(e){while(1)switch(e.p=e.n){case 0:return e.p=0,e.n=1,(0,a.pt)(t.$route.params.id);case 1:s=e.v,200===s.code&&(t.repoInfo=(0,n.A)((0,n.A)({},t.repoInfo),s.data),u.A.log("题库信息:",t.repoInfo)),e.n=3;break;case 2:e.p=2,i=e.v,u.A.error("获取题库详情失败:",i),t.$message.error("获取题库详情失败");case 3:return e.a(2)}},e,null,[[0,2]])}))()},startPractice:function(t){var e=this;return(0,o.A)((0,r.A)().m(function s(){var i,c,n,o,l,p,d;return(0,r.A)().w(function(s){while(1)switch(s.p=s.n){case 0:return s.p=0,i=e.getPracticeMode(t),c=i.practiceMode,n=i.topicType,o={repoId:e.$route.params.id,practiceMode:c,topicType:n},"2"===c&&(l=[],"1"===n&&e.topicStats.singleCount>0&&l.push("1"),"2"===n&&e.topicStats.multipleCount>0&&l.push("2"),"3"===n&&e.topicStats.judgeCount>0&&l.push("3"),o.questionTypes=l.join(",")),s.n=1,(0,a.tj)(o);case 1:p=s.v,200===p.code&&e.$router.push({name:"PracticeExam",params:{id:e.$route.params.id},query:{type:t,title:e.repoInfo.title,recordId:p.data}}),s.n=3;break;case 2:s.p=2,d=s.v,u.A.error("开始练习失败:",d),e.$message.error("开始练习失败");case 3:return s.a(2)}},s,null,[[0,2]])}))()},getPracticeMode:function(t){var e={sequence:{practiceMode:"3",topicType:null},random:{practiceMode:"1",topicType:null},wrong:{practiceMode:"4",topicType:null},single:{practiceMode:"2",topicType:"1"},multiple:{practiceMode:"2",topicType:"2"},judge:{practiceMode:"2",topicType:"3"}};return e[t]||{practiceMode:"1",topicType:null}},fetchTopicStats:function(){var t=this;return(0,o.A)((0,r.A)().m(function e(){var s,i,c,n,o,l;return(0,r.A)().w(function(e){while(1)switch(e.p=e.n){case 0:return e.p=0,e.n=1,(0,a.Gr)(t.$route.params.id);case 1:s=e.v,200===s.code&&(i=s.data||[],u.A.log("题型统计数据:",i),c=0,n=0,o=0,i.forEach(function(t){switch(t.topic_type){case"1":c=t.question_count;break;case"2":n=t.question_count;break;case"3":o=t.question_count;break}}),t.topicStats={singleCount:c,multipleCount:n,judgeCount:o,singleProgress:"",multipleProgress:"",judgeProgress:"",singleCorrectRate:0,multipleCorrectRate:0,judgeCorrectRate:0},u.A.log("处理后的题型统计:",t.topicStats)),e.n=3;break;case 2:e.p=2,l=e.v,u.A.error("获取题型统计失败:",l),t.$message.error("获取题型统计失败");case 3:return e.a(2)}},e,null,[[0,2]])}))()}},created:function(){this.fetchTopicStats()}},p=l,d=s(81656),f=(0,d.A)(p,i,c,!1,null,"d939418a",null),C=f.exports}}]);
//# sourceMappingURL=717.90b5d581.js.map